<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Floating Fireflies</title>
  <style>
    .firefly-layer {
      position: fixed;
      inset: 0;
      pointer-events: none;
      overflow: hidden;
      z-index: 9999;
      mix-blend-mode: screen;
    }

    .firefly {
      position: absolute;
      will-change: transform, opacity;
      transform-origin: center;
      user-select: none;
      -webkit-user-drag: none;
      transition: opacity 0.6s linear;
      width: calc(var(--size, 120px));
      height: auto;
      opacity: 0.95;
      filter: drop-shadow(0 6px 18px rgba(0,0,0,0.25));
    }

    @keyframes bob {
      0%   { transform: translate3d(0, 0, 0) scale(var(--scale,1)) rotate(calc(var(--rot-start, -3deg))); }
      25%  { transform: translate3d(var(--drift-x, 12px), -12px, 0) scale(calc(var(--scale,1) * 1.02)) rotate(calc(var(--rot-mid, 3deg))); }
      50%  { transform: translate3d(0, -6px, 0) scale(var(--scale,1)) rotate(calc(var(--rot-mid2, -2deg))); }
      75%  { transform: translate3d(calc(var(--drift-x, 12px) * -1), -14px, 0) scale(calc(var(--scale,1) * 0.98)) rotate(calc(var(--rot-end, 4deg))); }
      100% { transform: translate3d(0, 0, 0) scale(var(--scale,1)) rotate(calc(var(--rot-start, -3deg))); }
    }

    @keyframes flicker {
      0%,100% { opacity: 0.95; filter: drop-shadow(0 6px 20px rgba(255,255,200,0.16)); }
      10%     { opacity: 0.5;  filter: drop-shadow(0 10px 32px rgba(255,255,210,0.22)); }
      30%     { opacity: 0.9;  filter: drop-shadow(0 6px 14px rgba(255,255,200,0.14)); }
      55%     { opacity: 0.6;  filter: drop-shadow(0 12px 36px rgba(255,245,200,0.26)); }
      80%     { opacity: 0.95; filter: drop-shadow(0 6px 20px rgba(255,255,200,0.16)); }
    }

    .firefly.animate {
      animation: bob var(--dur, 9s) ease-in-out var(--delay, 0s) infinite,
                 flicker calc(var(--dur, 9s) / 2) ease-in-out calc(var(--delay, 0s) / 1.5) infinite;
    }
  </style>
</head>
<body>
  <div class="firefly-layer">
    <img class="firefly" id="ff1" src="https://raw.githubusercontent.com/jammer57/floatingfireflyhsr/refs/heads/main/Firefly%201.png.webp" alt="firefly 1" />
    <img class="firefly" id="ff2" src="https://raw.githubusercontent.com/jammer57/floatingfireflyhsr/refs/heads/main/Firefly%202.png.webp" alt="firefly 2" />
  </div>

  <script>
    (function () {
      const ids = ['ff1', 'ff2'];
      const rnd = (min, max) => Math.random() * (max - min) + min;

      ids.forEach((id, index) => {
        const el = document.getElementById(id);
        if (!el) return;

        // randomize base look
        el.style.setProperty('--size', Math.round(rnd(70, 160)) + 'px');
        el.style.setProperty('--dur', (rnd(7.5, 16)).toFixed(2) + 's');
        el.style.setProperty('--delay', (rnd(-4, 4)).toFixed(2) + 's');
        el.style.setProperty('--drift-x', Math.round(rnd(8, 36)) + 'px');
        el.style.setProperty('--scale', (rnd(0.78, 1.24)).toFixed(3));
        el.style.setProperty('--rot-start', (rnd(-6, -1)).toFixed(2) + 'deg');
        el.style.setProperty('--rot-mid', (rnd(1, 6)).toFixed(2) + 'deg');
        el.style.setProperty('--rot-mid2', (rnd(-4, 1)).toFixed(2) + 'deg');
        el.style.setProperty('--rot-end', (rnd(2, 7)).toFixed(2) + 'deg');
        el.classList.add('animate');

        // start at a random viewport position
        let x = rnd(0, window.innerWidth - 150);
        let y = rnd(0, window.innerHeight - 150);
        el.style.left = x + "px";
        el.style.top = y + "px";

        // wandering motion
        const wander = () => {
          const nx = Math.min(Math.max(x + rnd(-200, 200), 0), window.innerWidth - 150);
          const ny = Math.min(Math.max(y + rnd(-200, 200), 0), window.innerHeight - 150);
          el.style.transition = "left 10s ease-in-out, top 10s ease-in-out";
          el.style.left = nx + "px";
          el.style.top = ny + "px";
          x = nx; y = ny;
          setTimeout(wander, rnd(8000, 14000));
        };
        setTimeout(wander, rnd(1000, 4000));
      });
    })();
  </script>
</body>
</html>
